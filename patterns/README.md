# IATI-Pattern-Library
Place for web style components built in conjunction with the new IATI brand.

## Usage
The toolkit is based around the following elements, in order of granularity:
- **Style guide:** The core parts of the design and brand; colour, logos, layouts, typography
- **Modules:** Groups of elements that can be used in a design
- **Page Templates:** Example page template

## Folder structure
Within the repo we have the following folder structure:
- **assets:** contains all the SCSS files for the website design
- **includes:** holds the individual modules than can be view on the modules page of this pattern library
- **layouts:** contains the layout structure for the pattern library and the base layout for templates
- **models:** contains the content used in the pattern library
- **node_modules:** holds node files used to work the toolkit when editing it.
- **templates:** contains the individual page templates of pattern library and website design

An additional folder (`converted-html`) contains compiled output files (HTML/CSS/JS/Images) produced by [Skelly](https://www.npmjs.com/package/skelly) (see `Developer setup and usage` below) that form the demo site, visible at http://styles.iatistandard.org

### Detailed look at folder structure
- **assets**
    - **css**
        - **core:** contains the core styles of the design such as, typography, colour, forms and SCSS variables and mixins
        - **libs:** contains any css or SCSS from third party applications or libraries
        - **modules:** holds the individual SCSS files for specific modules used on the site
        - **screen.scss:** contains all SCSS imports of everthing in the css folder, this outputs as a screen.css file to be used on the site
    - **favicons:** contains website favicons
    - **icons:** holds files for grunticon and png formats of all svg icons
    - **img:** holds all the images used on the pattern library
    - **js**
        - **libs:** contains third party javascript libraries
        - **utils:** holds the individual javascript files used for the design of the website
        - **app.js:** contains all the javascript imports of everthing in the utils folder, this files is used on the site to serve the javascript
    - **svg**
        - **icons:** contains all the svg icons used on the site, uses grunticon to create the icons and their different colours, these can be seen in style-guide/icons
        - **source:** contains svg icons which don't need to be generated by grunticon
    - **includes**
        - **content:** contains content used on the design
        - **forms:** holds all the form elements markup
        - **listings:** contains markup for the different variations of the listing style modules
        - **macros:** holds code snippets for generating variations of icons and buttons
        - **navigation:** contains the markup for navigation elements
        - **partials:** contains all individual modules markup
        - **scaffold:** holds the markup for the global elements and structure used on every template
        - **tables:** contains markup for tables
    - **templates**
        - **page templates:** contains all the different page templates viewed in page-templates



## Using in projects

You need to include two files for CSS and JavaScript in your projects to start with:

**CSS**

`<link href="https://styles.iatistandard.org/assets/css/screen.css" rel="stylesheet">` goes in the `<head>`

**JavaScript**

`<script src="https://styles.iatistandard.org/assets/js/app.bundle.js"></script>` just before `</body>`

This will give you the basic style and JS functionality from the pattern library.

**Additional includes**

For icons we use Grunticon, and so have the following markup to include in the head:

```html
<script>/*! grunt-grunticon Stylesheet Loader - v2.1.6 | https://github.com/filamentgroup/grunticon | (c) 2015 Scott Jehl, Filament Group, Inc. | MIT license. */
!function(){function e(e,n,t){"use strict";var o=window.document.createElement("link"),r=n||window.document.getElementsByTagName("script")[0],a=window.document.styleSheets;return o.rel="stylesheet",o.href=e,o.media="only x",r.parentNode.insertBefore(o,r),o.onloadcssdefined=function(e){for(var n,t=0;t<a.length;t++)a[t].href&&a[t].href===o.href&&(n=!0);n?e():setTimeout(function(){o.onloadcssdefined(e)})},o.onloadcssdefined(function(){o.media=t||"all"}),o}function n(e,n){e.onload=function(){e.onload=null,n&&n.call(e)},"isApplicationInstalled"in navigator&&"onloadcssdefined"in e&&e.onloadcssdefined(n)}!function(t){var o=function(r,a){"use strict";if(r&&3===r.length){var i=t.navigator,c=t.document,s=t.Image,d=!(!c.createElementNS||!c.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect||!c.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1")||t.opera&&-1===i.userAgent.indexOf("Chrome")||-1!==i.userAgent.indexOf("Series40")),l=new s;l.onerror=function(){o.method="png",o.href=r[2],e(r[2])},l.onload=function(){var t=1===l.width&&1===l.height,i=r[t&&d?0:t?1:2];t&&d?o.method="svg":t?o.method="datapng":o.method="png",o.href=i,n(e(i),a)},l.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",c.documentElement.className+=" grunticon"}};o.loadCSS=e,o.onloadCSS=n,t.grunticon=o}(this),function(e,n){"use strict";var t=n.document,o="grunticon:",r=function(e){if(t.attachEvent?"complete"===t.readyState:"loading"!==t.readyState)e();else{var n=!1;t.addEventListener("readystatechange",function(){n||(n=!0,e())},!1)}},a=function(e){return n.document.querySelector('link[href$="'+e+'"]')},i=function(e){var n,t,r,a,i,c,s={};if(n=e.sheet,!n)return s;t=n.cssRules?n.cssRules:n.rules;for(var d=0;d<t.length;d++)r=t[d].cssText,a=o+t[d].selectorText,i=r.split(");")[0].match(/US\-ASCII\,([^"']+)/),i&&i[1]&&(c=decodeURIComponent(i[1]),s[a]=c);return s},c=function(e){var n,r,a,i;a="data-grunticon-embed";for(var c in e){i=c.slice(o.length);try{n=t.querySelectorAll(i)}catch(s){continue}r=[];for(var d=0;d<n.length;d++)null!==n[d].getAttribute(a)&&r.push(n[d]);if(r.length)for(d=0;d<r.length;d++)r[d].innerHTML=e[c],r[d].style.backgroundImage="none",r[d].removeAttribute(a)}return r},s=function(n){"svg"===e.method&&r(function(){c(i(a(e.href))),"function"==typeof n&&n()})};e.embedIcons=c,e.getCSS=a,e.getIcons=i,e.ready=r,e.svgLoadedCallback=s,e.embedSVG=s}(grunticon,this)}();
	grunticon(["/assets/icons/ico.data.svg.css", "/assets/icons/ico.data.png.css", "/assets/icons/ico.fallback.css"]);
</script>
<noscript><link href="/assets/icons/icon.fallback.css" rel="stylesheet"></noscript>
```



We also have some additional JS near the closing `</body>` tag… This will be merged into the `app.bundle.js` at some point though. This code handles the animation effects you see in the designs.

```javascript
<script src="/assets/js/libs/basicScroll.min.js"></script>
<script>
    const instance = basicScroll.create({
       elem: document.querySelector('.listing__body'),
       from: 'top-top',
       to: 'bottom-bottom',
       direct: true,
       props: {
          '--translateY': {
             from: '-20px',
             to: '20px'
          }
       }
    })
    instance.start()
</script>
```

## Developer setup and usage

The pattern library requires nodejs, npm and [skelly](https://www.npmjs.com/package/skelly) to run.

```
# Install Skelly using the node package manager globally
$ npm install -g skelly

# Run a live server
$ skelly serve
```

This will run a process to watch for changes to application files and will compile new versions on save.
Additional commands can be found using `skelly —-help`.
